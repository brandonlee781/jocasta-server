# Migration `watch-20200111225505`

This migration has been generated by Brandon Lee at 1/11/2020, 10:55:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "jocasta_schema"."Weapon" (
  "condition" text    ,
  "critical" integer  NOT NULL DEFAULT 0 ,
  "damage" integer  NOT NULL DEFAULT 0 ,
  "description" text    ,
  "encumberance" integer  NOT NULL DEFAULT 0 ,
  "hardPoints" integer  NOT NULL DEFAULT 0 ,
  "id" text  NOT NULL  ,
  "make" text    ,
  "name" text  NOT NULL DEFAULT '' ,
  "quantity" integer  NOT NULL DEFAULT 1 ,
  "range" text  NOT NULL DEFAULT 'Engaged' ,
  "rarity" integer  NOT NULL DEFAULT 1 ,
  "skill" text  NOT NULL DEFAULT 'Brawl' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."Armor" (
  "condition" text    ,
  "defense" text    REFERENCES "jocasta_schema"."DefenseAttribute"("id") ON DELETE SET NULL,
  "description" text    ,
  "encumberance" integer  NOT NULL DEFAULT 0 ,
  "hardPoints" integer  NOT NULL DEFAULT 0 ,
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  "quantity" integer  NOT NULL DEFAULT 1 ,
  "rarity" integer  NOT NULL DEFAULT 1 ,
  "soak" integer  NOT NULL DEFAULT 0 ,
  "wearing" boolean  NOT NULL DEFAULT false ,
  PRIMARY KEY ("id")
);

ALTER TABLE "jocasta_schema"."Attachment" ADD COLUMN "armor" text    REFERENCES "jocasta_schema"."Armor"("id") ON DELETE SET NULL,
ADD COLUMN "weapon" text    REFERENCES "jocasta_schema"."Weapon"("id") ON DELETE SET NULL;

ALTER TABLE "jocasta_schema"."Gear" DROP COLUMN "description",
ADD COLUMN "description" text    ;

ALTER TABLE "jocasta_schema"."User" DROP COLUMN "name",
ADD COLUMN "name" text    ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration watch-20200111225053..watch-20200111225505
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql//brandonleeSrf32pstgrs@localhost5432/jocasta?schema=jocasta_schema"
 }
 model User {
   id       String  @default(cuid()) @id
@@ -43,8 +43,23 @@
   Willpower
   Presence
 }
+enum SkillType {
+  General
+  Combat
+  Knowledge
+}
+
+enum WeaponSkill {
+  Brawl
+  RangedLight
+  RangedHeavy
+  Melee
+  Gunnery
+  Lightsaber
+}
+
 // Career
 // Character Fields
@@ -112,4 +127,36 @@
   hardPoints    Int
   base          String
   modifications String
 }
+
+model Weapon {
+  id            String          @default(cuid()) @id
+  name          String
+  quantity      Int             @default(1)
+  encumberance  Int             @default(0)
+  description   String?
+  rarity        Int             @default(1)
+  hardPoints    Int             @default(0)
+  condition     GearCondition?
+  attachments   Attachment[]
+  make          String?
+  range         Range
+  skill         WeaponSkill
+  damage        Int
+  critical      Int
+}
+
+model Armor {
+  id            String            @default(cuid()) @id
+  name          String
+  quantity      Int               @default(1)
+  encumberance  Int               @default(0)
+  description   String?
+  rarity        Int               @default(1)
+  hardPoints    Int               @default(0)
+  condition     GearCondition?
+  attachments   Attachment[]
+  defense       DefenseAttribute?
+  soak          Int
+  wearing       Boolean
+}
```


