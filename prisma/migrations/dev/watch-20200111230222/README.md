# Migration `watch-20200111230222`

This migration has been generated by Brandon Lee at 1/11/2020, 11:02:23 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "jocasta_schema"."Career" (
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."Specialization" (
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."TalentTreeLocation" (
  "column" integer  NOT NULL DEFAULT 0 ,
  "connections" integer []   ,
  "id" text  NOT NULL  ,
  "purchased" boolean  NOT NULL DEFAULT false ,
  "row" integer  NOT NULL DEFAULT 0 ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."TalentTree" (
  "id" text  NOT NULL  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."CharacterTalent" (
  "column" integer  NOT NULL DEFAULT 0 ,
  "id" text  NOT NULL  ,
  "row" integer  NOT NULL DEFAULT 0 ,
  "talentId" text  NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "jocasta_schema"."Talent" (
  "activation" text  NOT NULL DEFAULT 'Passive' ,
  "description" text    ,
  "force" boolean  NOT NULL DEFAULT false ,
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  "page" text    ,
  "ranked" boolean  NOT NULL DEFAULT false ,
  PRIMARY KEY ("id")
);

ALTER TABLE "jocasta_schema"."Armor" DROP COLUMN "condition",
ADD COLUMN "condition" text    ,
DROP COLUMN "description",
ADD COLUMN "description" text    ;

ALTER TABLE "jocasta_schema"."Gear" DROP COLUMN "description",
ADD COLUMN "description" text    ;

ALTER TABLE "jocasta_schema"."Skill" DROP COLUMN "type",
ADD COLUMN "career" text    REFERENCES "jocasta_schema"."Career"("id") ON DELETE SET NULL,
ADD COLUMN "model" text  NOT NULL DEFAULT 'General' ,
ADD COLUMN "specialization" text    REFERENCES "jocasta_schema"."Specialization"("id") ON DELETE SET NULL;

ALTER TABLE "jocasta_schema"."User" DROP COLUMN "name",
ADD COLUMN "name" text    ;

ALTER TABLE "jocasta_schema"."Weapon" DROP COLUMN "condition",
ADD COLUMN "condition" text    ,
DROP COLUMN "description",
ADD COLUMN "description" text    ,
DROP COLUMN "make",
ADD COLUMN "make" text    ;

ALTER TABLE "jocasta_schema"."Specialization" ADD COLUMN "career" text  NOT NULL  REFERENCES "jocasta_schema"."Career"("id") ON DELETE RESTRICT;

ALTER TABLE "jocasta_schema"."TalentTreeLocation" ADD COLUMN "talentTree" text    REFERENCES "jocasta_schema"."TalentTree"("id") ON DELETE SET NULL;

ALTER TABLE "jocasta_schema"."TalentTree" ADD COLUMN "specialization" text  NOT NULL  REFERENCES "jocasta_schema"."Specialization"("id") ON DELETE RESTRICT,
ADD COLUMN "talent" text    REFERENCES "jocasta_schema"."Talent"("id") ON DELETE SET NULL;

ALTER TABLE "jocasta_schema"."CharacterTalent" ADD COLUMN "specialization" text  NOT NULL  REFERENCES "jocasta_schema"."Specialization"("id") ON DELETE RESTRICT;

ALTER TABLE "jocasta_schema"."Talent" ADD COLUMN "specialization" text    REFERENCES "jocasta_schema"."Specialization"("id") ON DELETE SET NULL;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration watch-20200111225633..watch-20200111230222
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql//brandonleeSrf32pstgrs@localhost5432/jocasta?schema=jocasta_schema"
 }
 model User {
   id       String  @default(cuid()) @id
@@ -58,11 +58,31 @@
   Gunnery
   Lightsaber
 }
+enum TalentActivation {
+  Passive
+  Action
+  Maneuver
+  Incidental
+  OutOfTurn
+}
+
+enum TalentTreeConnection {
+  TOP
+  RIGHT
+  BOTTOM
+  LEFT
+}
+
 // Career
+model Career {
+  id                String            @default(cuid()) @id
+  name              String
+  skills            Skill[]
+  specializations   Specialization[]
+}
-
 // Character Fields
 model Threshold {
   id              String @default(cuid()) @id
   threshold       Int
@@ -165,13 +185,56 @@
 model Skill {
   id              String              @default(cuid()) @id
   name            String              @unique
   characteristic  CharacteristicName
-  type            SkillType
+  model            SkillType
 }
 model CharacterSkill {
   id        String  @default(cuid()) @id
   skillId   String
   career    Boolean @default(true)
   rank      Int     @default(0)
+}
+
+// Specialization
+model Specialization {
+  id        String  @default(cuid()) @id
+  name      String
+  skills    Skill[]
+  career    Career
+  talents   Talent[]
+}
+
+// Talent
+model TalentTreeLocation {
+  id            String  @default(cuid()) @id
+  row           Int
+  column        Int
+  purchased     Boolean @default(false)
+  connections   Int[]
+}
+
+model TalentTree {
+  id              String                @default(cuid()) @id
+  specialization  Specialization
+  locations       TalentTreeLocation[]
+}
+
+model CharacterTalent {
+  id              String          @default(cuid()) @id
+  talentId        String
+  row             Int
+  column          Int
+  specialization  Specialization
+}
+
+model Talent {
+  id            String            @default(cuid()) @id
+  name          String
+  activation    TalentActivation
+  ranked        Boolean
+  force         Boolean
+  trees         TalentTree[]
+  page          String?
+  description   String?
 }
```


